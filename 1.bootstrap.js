(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[1],{

/***/ "./index.css":
/*!*******************!*\
  !*** ./index.css ***!
  \*******************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !./node_modules/css-loader/dist/cjs.js!./index.css */ \"./node_modules/css-loader/dist/cjs.js!./index.css\");\n\n            \n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"], options);\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (_node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].locals || {});\n\n//# sourceURL=webpack:///./index.css?");

/***/ }),

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _shubidumdu_wasm_game_of_life__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @shubidumdu/wasm-game-of-life */ \"./node_modules/@shubidumdu/wasm-game-of-life/wasm_game_of_life.js\");\n/* harmony import */ var _shubidumdu_wasm_game_of_life_wasm_game_of_life_bg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @shubidumdu/wasm-game-of-life/wasm_game_of_life_bg */ \"./node_modules/@shubidumdu/wasm-game-of-life/wasm_game_of_life_bg.wasm\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_controls_OrbitControls__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three/examples/jsm/controls/OrbitControls */ \"./node_modules/three/examples/jsm/controls/OrbitControls.js\");\n/* harmony import */ var normalize_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! normalize.css */ \"./node_modules/normalize.css/normalize.css\");\n/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index.css */ \"./index.css\");\n\n\n\n\n\n\n\nconst hexStringToHex = (str) => parseInt(str.replace(/^#/, ''), 16);\n\nlet isStop = true;\n\nconst INITIAL_ACTIVE_COLOR = '#D54B3F';\nconst INITIAL_INACTIVE_COLOR = '#D2CFA6';\nconst INITIAL_BACKGROUND_COLOR = '#1D383D';\nconst INITIAL_GRID_COLOR = '#FDF8F5';\n\nlet universe = _shubidumdu_wasm_game_of_life__WEBPACK_IMPORTED_MODULE_0__[\"Universe\"].new();\nlet width = universe.width();\nlet height = universe.height();\nconst activeColor = document.querySelector('#active-color');\nactiveColor.value = INITIAL_ACTIVE_COLOR;\nconst inactiveColor = document.querySelector('#inactive-color');\ninactiveColor.value = INITIAL_INACTIVE_COLOR;\nconst backgroundColor = document.querySelector('#background-color');\nbackgroundColor.value = INITIAL_BACKGROUND_COLOR;\nconst gridColor = document.querySelector('#grid-color');\ngridColor.value = INITIAL_GRID_COLOR;\nconst stopBtn = document.querySelector('#stop-button');\nconst resetBtn = document.querySelector('#reset-button');\nconst resizeBtn = document.querySelector('#resize-button');\nconst randomBtn = document.querySelector('#random-button');\n\nfunction resizeRendererToDisplaySize(renderer) {\n  const canvas = renderer.domElement;\n  const pixelRatio = window.devicePixelRatio;\n  const width = (canvas.clientWidth * pixelRatio) | 0;\n  const height = (canvas.clientHeight * pixelRatio) | 0;\n  const needResize = canvas.width !== width || canvas.height !== height;\n  if (needResize) {\n    renderer.setSize(width, height, false);\n  }\n  return needResize;\n}\n\nconst canvas = document.querySelector('#game-of-life-canvas');\nconst renderer = new three__WEBPACK_IMPORTED_MODULE_2__[\"WebGLRenderer\"]({ canvas });\n\nconst fov = 75;\nconst aspect = 2;\nconst near = 0.1;\nconst far = 1024;\nconst camera = new three__WEBPACK_IMPORTED_MODULE_2__[\"PerspectiveCamera\"](fov, aspect, near, far);\n\nconst controls = new three_examples_jsm_controls_OrbitControls__WEBPACK_IMPORTED_MODULE_3__[\"OrbitControls\"](camera, renderer.domElement);\n\ncamera.position.setY(48);\ncamera.position.setZ(36);\n\ncontrols.update();\n\nconst scene = new three__WEBPACK_IMPORTED_MODULE_2__[\"Scene\"]();\nscene.background = new three__WEBPACK_IMPORTED_MODULE_2__[\"Color\"](hexStringToHex(INITIAL_BACKGROUND_COLOR));\n\nrenderer.render(scene, camera);\n\nconst geometry = new three__WEBPACK_IMPORTED_MODULE_2__[\"BoxGeometry\"](1, 1, 1);\nconst activeMaterial = new three__WEBPACK_IMPORTED_MODULE_2__[\"MeshPhysicalMaterial\"]({\n  color: hexStringToHex(INITIAL_ACTIVE_COLOR),\n});\nconst inactiveMaterial = new three__WEBPACK_IMPORTED_MODULE_2__[\"MeshPhysicalMaterial\"]({\n  color: hexStringToHex(INITIAL_INACTIVE_COLOR),\n});\nconst cursorMaterial = new three__WEBPACK_IMPORTED_MODULE_2__[\"MeshPhysicalMaterial\"]({\n  color: hexStringToHex(INITIAL_ACTIVE_COLOR),\n  opacity: 0.6,\n  transparent: true,\n});\n\nactiveColor.addEventListener('change', (e) => {\n  const hex = hexStringToHex(e.target.value);\n  activeMaterial.color.setHex(hex);\n  cursorMaterial.color.setHex(hex);\n});\n\ninactiveColor.addEventListener('change', (e) => {\n  const hex = hexStringToHex(e.target.value);\n  inactiveMaterial.color.setHex(hex);\n});\n\nbackgroundColor.addEventListener('change', (e) => {\n  const hex = hexStringToHex(e.target.value);\n  scene.background = new three__WEBPACK_IMPORTED_MODULE_2__[\"Color\"](hex);\n});\n\nconst getIndex = (row, column) => {\n  return row * width + column;\n};\n\nconst bitIsSet = (n, arr) => {\n  const byte = Math.floor(n / 8);\n  const mask = 1 << n % 8;\n  return (arr[byte] & mask) === mask;\n};\n\nconst GRID_SIZE = 64;\nconst GRID_DIVISIONS = 64;\n\nlet gridHelper = new three__WEBPACK_IMPORTED_MODULE_2__[\"GridHelper\"](\n  GRID_SIZE,\n  GRID_DIVISIONS,\n  INITIAL_GRID_COLOR,\n  INITIAL_GRID_COLOR,\n);\n\ngridColor.addEventListener('change', (e) => {\n  const hex = hexStringToHex(e.target.value);\n  gridHelper.remove();\n  gridHelper = new three__WEBPACK_IMPORTED_MODULE_2__[\"GridHelper\"](GRID_SIZE, GRID_DIVISIONS, hex, hex);\n  scene.add(gridHelper);\n});\n\nconst light = new three__WEBPACK_IMPORTED_MODULE_2__[\"HemisphereLight\"](0xffffbb, 0x080820, 1);\nlight.position.set(0, 2, 0);\n\nconst drawCells = (time) => {\n  const cellsPtr = universe.cells();\n  const cells = new Uint8Array(_shubidumdu_wasm_game_of_life_wasm_game_of_life_bg__WEBPACK_IMPORTED_MODULE_1__[\"memory\"].buffer, cellsPtr, (width * height) / 8);\n\n  for (let row = 0; row < height; row++) {\n    for (let col = 0; col < width; col++) {\n      const idx = getIndex(row, col);\n      if (!bitIsSet(idx, cells)) continue;\n      const exist = scene.children.find(\n        (child) => child.col === col && child.row === row,\n      );\n      if (exist) scene.remove(exist);\n      const cube = new three__WEBPACK_IMPORTED_MODULE_2__[\"Mesh\"](geometry, activeMaterial);\n      cube.position.set(row - width / 2 + 0.5, 0.5, col - height / 2 + 0.5);\n      cube.startAt = time;\n      cube.row = row;\n      cube.col = col;\n      scene.add(cube);\n    }\n  }\n};\n\nlet animationId = null;\n\nfunction render(time) {\n  time *= 0.005; // convert time to seconds\n  universe.tick();\n  scene.children.forEach((child) => {\n    if (child.type === 'Mesh') {\n      if (time - child.startAt < 1) {\n        child.material = inactiveMaterial;\n        child.scale.setY(Math.sin((time - child.startAt) * Math.PI));\n        child.position.setY(Math.sin((time - child.startAt) * Math.PI) / 2);\n      } else {\n        scene.remove(child);\n      }\n    }\n  });\n  // scene.remove.apply(scene, scene.children);\n  drawCells(time);\n\n  if (resizeRendererToDisplaySize(renderer)) {\n    const canvas = renderer.domElement;\n    camera.aspect = canvas.clientWidth / canvas.clientHeight;\n    camera.updateProjectionMatrix();\n  }\n\n  controls.update();\n  renderer.render(scene, camera);\n  animationId = requestAnimationFrame(render);\n}\n\nfunction renderWithStop(time) {\n  if (resizeRendererToDisplaySize(renderer)) {\n    const canvas = renderer.domElement;\n    camera.aspect = canvas.clientWidth / canvas.clientHeight;\n    camera.updateProjectionMatrix();\n  }\n\n  controls.update();\n  renderer.render(scene, camera);\n  animationId = requestAnimationFrame(renderWithStop);\n}\n\nscene.add(light, gridHelper);\nanimationId = requestAnimationFrame(renderWithStop);\n\nstopBtn.addEventListener('click', (e) => {\n  if (isStop) {\n    isStop = false;\n    e.target.textContent = 'STOP';\n    cancelAnimationFrame(animationId);\n    animationId = requestAnimationFrame(render);\n  } else {\n    isStop = true;\n    e.target.textContent = 'START';\n    cancelAnimationFrame(animationId);\n    animationId = requestAnimationFrame(renderWithStop);\n  }\n});\n\nresetBtn.addEventListener('click', (e) => {\n  universe.reset();\n  scene.clear();\n  scene.add(light, gridHelper);\n  renderer.render(scene, camera);\n});\n\nresizeBtn.addEventListener('click', (e) => {\n  const size = window.prompt('Please enter the size you want. (n >= 3)', width);\n  if (!size) return;\n  if (isNaN(size)) {\n    window.alert('Input value is not a number.');\n    return;\n  }\n  if (size < 3) {\n    window.alert('It cannot be smaller than 3.');\n    return;\n  }\n  try {\n    universe.resize(size || 64);\n    width = size;\n    height = size;\n    gridHelper = new three__WEBPACK_IMPORTED_MODULE_2__[\"GridHelper\"](\n      size,\n      size,\n      gridColor.value,\n      gridColor.value,\n    );\n    scene.clear();\n    scene.add(light, gridHelper);\n    renderer.render(scene, camera);\n    drawCells(0);\n  } catch (err) {}\n});\n\nrandomBtn.addEventListener('click', (e) => {\n  universe.set_height(width);\n  scene.clear();\n  scene.add(light, gridHelper);\n  renderer.render(scene, camera);\n  universe.random();\n  drawCells(0);\n});\n\nconst raycaster = new three__WEBPACK_IMPORTED_MODULE_2__[\"Raycaster\"]();\n\nconst pointer = new three__WEBPACK_IMPORTED_MODULE_2__[\"Vector2\"]();\n\nconst onMouseMove = (e) => {\n  scene.children.forEach((child) => {\n    if (child.type === 'cursor') scene.remove(child);\n  });\n  pointer.x = (e.clientX / window.innerWidth) * 2 - 1;\n  pointer.y = -(e.clientY / window.innerHeight) * 2 + 1;\n  raycaster.setFromCamera(pointer, camera);\n  const intersects = raycaster.intersectObject(gridHelper);\n  if (intersects.length > 0) {\n    const posX = intersects[0].point.x;\n    const posZ = intersects[0].point.z;\n    const row =\n      parseInt(posX + width / 2) >= width\n        ? width - 1\n        : parseInt(posX + width / 2);\n    const col =\n      parseInt(posZ + height / 2) >= height\n        ? height - 1\n        : parseInt(posZ + height / 2);\n    const cube = new three__WEBPACK_IMPORTED_MODULE_2__[\"Mesh\"](geometry, cursorMaterial);\n    cube.position.set(row - width / 2 + 0.5, 0.5, col - height / 2 + 0.5);\n    cube.type = 'cursor';\n    scene.add(cube);\n  }\n};\n\nconst makeThunk = (row, col) => {\n  return function setCellIfNoMovement(e) {\n    if (mouse.moveX < 5 && mouse.moveY < 5) {\n      const exist = scene.children.find(\n        (child) => child.row === row && child.col === col,\n      );\n      universe.toggle_cell(row, col);\n      if (exist) scene.remove(exist);\n      drawCells(0);\n    }\n    window.removeEventListener('pointermove', recordMovement);\n    window.removeEventListener('pointerup', setCellIfNoMovement);\n  };\n};\n\nconst onMouseClick = (e) => {\n  pointer.x = (e.clientX / window.innerWidth) * 2 - 1;\n  pointer.y = -(e.clientY / window.innerHeight) * 2 + 1;\n  raycaster.setFromCamera(pointer, camera);\n  const intersects = raycaster.intersectObject(gridHelper);\n  if (intersects.length > 0) {\n    const posX = intersects[0].point.x;\n    const posZ = intersects[0].point.z;\n    const row =\n      parseInt(posX + width / 2) >= width\n        ? width - 1\n        : parseInt(posX + width / 2);\n    const col =\n      parseInt(posZ + height / 2) >= height\n        ? height - 1\n        : parseInt(posZ + height / 2);\n    const setCellIfNoMovement = makeThunk(row, col);\n    recordStartPosition(e);\n    window.addEventListener('pointermove', recordMovement);\n    window.addEventListener('pointerup', setCellIfNoMovement);\n  }\n};\n\nconst mouse = {\n  x: 0,\n  y: 0,\n};\n\nfunction recordStartPosition(event) {\n  mouse.x = event.clientX;\n  mouse.y = event.clientY;\n  mouse.moveX = 0;\n  mouse.moveY = 0;\n}\nfunction recordMovement(event) {\n  mouse.moveX += Math.abs(mouse.x - event.clientX);\n  mouse.moveY += Math.abs(mouse.y - event.clientY);\n}\n\ncanvas.addEventListener('mousemove', onMouseMove);\ncanvas.addEventListener('pointerdown', onMouseClick);\n\n\n//# sourceURL=webpack:///./index.js?");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./index.css":
/*!*********************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./index.css ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \"html,\\nbody {\\n  height: 100%;\\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,\\n    Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\\n}\\n\\n#help-button {\\n  position: absolute;\\n  left: 1rem;\\n  top: 1rem;\\n}\\n\\n#fps {\\n  white-space: pre;\\n  font-family: monospace;\\n}\\n\\n#game-of-life-canvas {\\n  width: 100%;\\n  height: 100%; /* Fallback for browsers that do not support Custom Properties */\\n  /* height: calc(var(--vh, 1vh) * 100); */\\n}\\n\\ninput[type='color'] {\\n  position: absolute;\\n  right: 1rem;\\n}\\n\\n#active-color {\\n  top: 1rem;\\n}\\n\\n#inactive-color {\\n  top: 3rem;\\n}\\n\\n#background-color {\\n  top: 5rem;\\n}\\n\\n#grid-color {\\n  top: 7rem;\\n}\\n\\n#vertical-button-wrap {\\n  position: absolute;\\n  left: 50%;\\n  bottom: 1rem;\\n  transform: translateX(-50%);\\n}\\n\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack:///./index.css?./node_modules/css-loader/dist/cjs.js");

/***/ })

}]);